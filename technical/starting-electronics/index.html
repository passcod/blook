<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>2025 | Things I wish I&#x27;d known before starting electronics design - Félix Saparelli</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Félix Saparelli</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/passcod/blook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- vim: set tw=100 : -->
<h1 id="things-i-wish-id-known-before-starting-electronics-design"><a class="header" href="#things-i-wish-id-known-before-starting-electronics-design">Things I wish I’d known before starting electronics design</a></h1>
<blockquote>
<p>January 2025</p>
</blockquote>
<p>This is a bunch of things that I wish I’d known or been told about when I was starting in the hobby
of designing and tinkering with electronics, including soldering, assembly, ordering, designing…
This came about after I had a 5-minute call which turned into a 90-minute call with someone just
starting in this, and while I’m very much a beginner hobbyist myself there’s still <strong>so much stuff</strong>
I wish I’d known, that I told that person about, and more that I didn’t because it was already
getting way too long. This page is a work in progress / living document: it will be updated with
more as I think of it, and then also as I learn more, and if more-experienced people give feedback.</p>
<p>The document is currently about 20% done (i.e. 20% to documenting the current state of my knowledge
in this field). You may want to check back in a while as I complete more of it.</p>
<ul>
<li><a href="#rules">Rules</a></li>
<li><a href="#terminology">Terminology</a>
<ul>
<li><a href="#eda-cad-gerber-bom">EDA, CAD, Gerber, BOM</a></li>
<li><a href="#pcb-board">PCB, Board</a></li>
<li><a href="#layers">Layers</a></li>
<li><a href="#traces-planes-pours-thermal-reliefs">Traces, planes, pours, thermal reliefs</a></li>
<li><a href="#components">Components</a>
<ul>
<li><a href="#pins-connectors">Pins, connectors</a></li>
<li><a href="#through-hole-tht-leaded-components">Through-hole, THT, Leaded components</a></li>
<li><a href="#smd-smt">SMD, SMT</a></li>
<li><a href="#hybrid">Hybrid</a></li>
</ul>
</li>
<li><a href="#holes-vias-mounting-holes-pth-npth">Holes, vias, mounting holes, PTH, NPTH</a></li>
<li><a href="#ground-floating-not-connected-not-internally-connected">Ground, floating, not connected, not internally connected</a></li>
</ul>
</li>
<li><a href="#soldering">Soldering</a>
<ul>
<li><a href="#flux">Flux</a>
<ul>
<li><a href="#solder-paste">Solder paste</a></li>
<li><a href="#flux-forms">Flux forms</a></li>
</ul>
</li>
<li><a href="#solder">Solder</a>
<ul>
<li><a href="#melting-point">Melting point</a></li>
<li><a href="#temperature-on-components">Temperature on components</a></li>
</ul>
</li>
<li><a href="#heated-tables">Heated tables</a></li>
<li><a href="#iron">Iron</a>
<ul>
<li><a href="#tips">Tips</a></li>
<li><a href="#iron-cleaning">Iron cleaning</a></li>
</ul>
</li>
<li><a href="#delivery">Delivery</a>
<ul>
<li><a href="#syringe-tips">Syringe tips</a></li>
<li><a href="#syringe-applicators">Syringe applicators</a></li>
</ul>
</li>
<li><a href="#microscope">Microscope</a></li>
<li><a href="#ppe">PPE</a></li>
</ul>
</li>
<li><a href="#design">Design</a>
<ul>
<li><a href="#mounting-holes-heatsink-holes-stress-relief">Mounting holes, heatsink holes, stress relief</a></li>
<li><a href="#high-speed-low-speed-high-frequency-signals">High speed, low speed, high frequency signals</a></li>
<li><a href="#routing-differential-pairs">Routing differential pairs</a></li>
<li><a href="#stackup">Stackup</a></li>
<li><a href="#stitching-vias">Stitching vias</a></li>
<li><a href="#logos">Logos</a></li>
</ul>
</li>
</ul>
<h1 id="rules"><a class="header" href="#rules">Rules</a></h1>
<p>In EE, “rules” are more like guidelines. You’ll find plenty of advice for contradictory “rules” and
many rules can be broken “if you know what you’re doing” or if you accept the tradeoffs. That said,
as a beginner it’s worth following rules as much as you can, as you most likely <em>don’t</em> “know what
you’re doing” or understand the tradeoffs.</p>
<p>There’s also a tremendous amount of advice out there that is outdated or based on little else than
“it’s always been done that way.” Unfortunately as a beginner you (and I) won’t have the knowledge
to discount those, or to be able to decide if a piece of advice only really applies to certain use
cases and not your own. <a href="https://www.youtube.com/@RobertFeranec">Robert Feranec</a>’s YouTube channel
is pretty great here.</p>
<h1 id="terminology"><a class="header" href="#terminology">Terminology</a></h1>
<h2 id="eda-cad-gerber-bom"><a class="header" href="#eda-cad-gerber-bom">EDA, CAD, Gerber, BOM</a></h2>
<p>Computer Assisted Design or CAD is both the practice and more typically as a shorthand the
<em>software</em> used for designing something.</p>
<p>EDA is Electronic Design Automation, and similarly EDA is typically used to refer to EDA <em>software</em>
which is specialised CAD for electronics design.</p>
<p>I use <a href="https://www.kicad.org/">Kicad</a> which is free (and open source), you’ll also see <a href="http://eagle.autodesk.com/">Autodesk
EAGLE</a> especially on older resources as EAGLE is discontinued, and
<a href="https://www.altium.com/">Altium</a> and <a href="https://www.keysight.com/us/en/products/software/pathwave-design-software/pathwave-advanced-design-system/pathwave-ads-rf-microwave-circuit-design.html">Keysight</a> which are leading professional solutions.</p>
<p>There’s also more experimental solutions like <a href="https://horizon-eda.org/">Horizon EDA</a> which focuses
on an excellent experience for building and maintaining part libraries, various efforts to make
programmatic EDA like <a href="https://github.com/michaelgale/pcbflow">pcbflow</a>, and online EDAs typically
as part of a low-cost fab’s offering, like <a href="https://easyeda.com/">EasyEDA</a>.</p>
<p>All EDAs output <strong>Gerber</strong>, which is a file format that describes how to print the copper, solder
mask, silkscreen, solder paste, and where to drill and the board stackup, <strong>BOM</strong> (Bill Of Material)
CSV files which describe which components are required for assembly, and <strong>pick-and-place</strong> CSV
files which describe where to place components (used by pick-and-place machines for automated
assembly).</p>
<h2 id="pcb-board"><a class="header" href="#pcb-board">PCB, Board</a></h2>
<p>The Printed Circuit Board is generally <em>just</em> the board, that is, the laminated stack of etched
copper and core and prepreg, not including the components mounted on it. By extension, a <em>populated</em>
(“that has the components attached”) board will also be called a PCB as a whole, by opposition to
the wires, screws, enclosures, and such.</p>
<p>The distinction can be important when talking about a particular design, e.g. “how is this connected
on the PCB” refers to the traces within the circuit board rather than any external wiring or by
components. (Although there can exist “zero ohm resistors” or “solder bridges” which are technically
components that provide trace continuity outside of the board itself.)</p>
<p><img src="./populated-pcb.webp" alt="a populated PCB" /></p>
<p>A “bare” or “unpopulated” PCB is one without any of the components attached yet.</p>
<p><img src="./bare-pcb.jpg" alt="a bare PCB" /></p>
<h2 id="layers"><a class="header" href="#layers">Layers</a></h2>
<p>A PCB is a laminated (glued together) stack of conductive and non-conductive material.</p>
<p>Typically when talking about layers we’re talking about the conductive layers. Prototype PCBs will
typically have 1, 2, or 4 conductive layers. Advanced PCBs may have 6, 8, 12, all the way up to 32
layers (or even more!).</p>
<p>The PCB also includes dielectric or non-conductive layers, in between and above and below the
conductive layers. Typically conductive layers are called “copper” layer; most of the time they
<em>are</em> literal copper but there’s also other technologies out there.</p>
<p>Dielectric material is typically FR4 (which stands for Flame Retardant grade 4). That’s a weave of
fibreglass impregnated by resin. In very cheap in-house prototyping (<a href="https://www.youtube.com/watch?v=wAiGCyZZq6w">Steven Hawes
(2025)</a>) you might also see FR1 which is a kind of
cardboard. There’s also (<a href="https://www.researchgate.net/publication/369913845_An_Overview_of_Flame_Retardants_in_Printed_Circuit_Boards_for_LEDs_and_other_Electronic_Devices">Ike-Eze
(2023)</a>)
FR2 (more durable FR1), FR3 (cardboard and epoxy), FR5 (high-temperature FR4, typically for
automotive), CEM-3 (epoxy composite, newer advance on FR4), Polyimide (flexible film for flexible
PCBs), PTFE (teflon, high frequency flexible PCBs), and Aluminum (cheaper, thermally conductive) as
well as other metals (<a href="https://www.researchgate.net/publication/263565968_Printed_circuit_board_technologies_for_thermal_management">Burr
(2013)</a>).</p>
<p>In a <strong>stackup</strong> (the specification of electric and dielectric materials and their layer thicknesses
in a board), you’ll often see a difference between “core” and “prepreg”. These are manufacturing
concerns: “prepreg” is uncured dielectric material that is applied between layers <em>during</em> board
manufacture, while “core” is dielectric material that is pre-assembled between conductive layers and
cured into rigid sheets prior to manufacture, typically by a different factory (<a href="https://electronics.stackexchange.com/q/356072">Neil_UK
(2018)</a>).</p>
<p>Finally, on top of the front and back outer layers several coatings are done:</p>
<ul>
<li>a protective non-conductive coating called the <strong>solder mask</strong>, which masks off the areas that
<em>don’t</em> need to be soldered or conductive (this is what gives the typical green colour of PCBs,
though other colours are available but more expensive).</li>
<li>a protective conductive coating applied to the non-solder-masked areas, called the <strong>surface
finish</strong>. This is either HASL (Hot Air Solder Leveling), which covers the exposed copper in
solder, Lead-Free HASL (HASL but with lead-free solder), or ENIG (Electro-less Nickel and
Immersion Gold), which is a nickel coating that is further finished with a thin gold plating, and
gives the characteristic yellow colour of pads. HASL is cheap, Lead-free HASL is a bit more
expensive, and ENIG is expensive. Typically I’ll use HASL for prototyping (as long as you’re not
licking the board, leaded HASL is fine).</li>
<li>a decorative printed ink layer called the <strong>silkscreen</strong>, which provides text and graphics, such as
for component outlines and reference designators (used for hand-assembly and debugging), connector
port names, assembly instructions, branding, revision/version information, etc. This is typically
a single colour, often white unless a lighter solder mask colour is used like yellow or white; in
some fabs multi-colour silkscreens are available (but expensive).</li>
</ul>
<h2 id="traces-planes-pours-thermal-reliefs"><a class="header" href="#traces-planes-pours-thermal-reliefs">Traces, planes, pours, thermal reliefs</a></h2>
<p>A <strong>trace</strong> or track is a continuous bit of conductor within a PCB. Typically a trace is on a single
layer, and traces on different layers are connected with <em>vias</em>, but by extension one can talk about
an entire multi-layer connection between two or more pins as a single trace.</p>
<p><img src="pcb-trace-section.png" alt="a cross section diagram of a two-layer PCB showing a trace on the top and a plane on the bottom" /></p>
<p>A <strong>plane</strong> is when an entire layer is one sheet of conductor. There can be small holes (for vias or
keep-out zones) and there can be small bits of other traces within the plane in some cases where
it’s not possible to do otherwise, but one does not want to <em>split</em> or <em>break</em> the plane (<a href="https://www.ti.com/lit/an/szza009/szza009.pdf">TI
(1999)</a>): to have sections of the plane that are
separate or almost-separate from each other.</p>
<p><img src="./pcb-plane.png" alt="a PCB plane with only vias and a cutout" /></p>
<p>Power planes can be different here, though <a href="https://www.youtube.com/watch?v=kdCJxdR7L_I">Bogatin (2021)</a> recommends not using power planes
anyway.</p>
<p><strong>Pours</strong> are when you flood the “empty spaces” on a signal layer with copper, which you generally
attach to ground or leave floating.</p>
<p>Pours on signal layers are generally considered a bad thing for signal integrity reasons, see
<a href="https://www.amazon.com.au/dp/163081962X">Bogatin (2022)</a>, <a href="https://electronics.stackexchange.com/a/481066/355126">SteveSh (2020)</a>. However,
pours on outer layers specifically are often required for manufacturing yield, see <a href="https://jlcpcb.com/blog/the-importance-of-copper-pour-in-empty-areas">JLCPCB
(2024)</a>.</p>
<p><strong><a href="https://en.wikipedia.org/wiki/Thermal_relief">Thermal reliefs</a></strong> are wheel-spoke attachements
from pads to copper pours and planes for the purpose of limiting thermal conductivity while still
having a good electrical connection. You typically want to limit thermal conductivity so that it’s
easier to solder, especially for through-hole components.</p>
<p><img src="./pcb-thermal-relief.png" alt="PCB diagram showing thermal reliefs by Wikipedia user Romanski, CC BY-SA 2.0" /></p>
<p>Kicad has an option (in a Zone’s properties) to specify that all plated through-holes attached to a
zone must have thermal reliefs.</p>
<p>It’s somewhat common to write text or graphics into the (outer) copper layers for branding purposes,
in a similar fashion as the silkscreen but more discreet and harder to alter. It’s also possible to
have such decorations on inner layers, though that’s more of an easter-egg or for quality-control
purposes as those wouldn’t be visible except using X-Ray inspection or by delaminating the board.</p>
<h2 id="components"><a class="header" href="#components">Components</a></h2>
<p>Components are the devices mounted to a PCB. These can occasionally be entire PCBs in their own
regard.</p>
<h3 id="pins-connectors"><a class="header" href="#pins-connectors">Pins, connectors</a></h3>
<p><strong>Pins</strong> have a double meaning: it can either refer to physical pins, which are thin conductors you
can connect to, like for pin headers or within connectors; and it can also refer to the physical
numbering and logical assignment of signals to connectors of an IC.</p>
<p>For example, you can refer to “a ground pin” or “the clock input pin” or “pin 1” and those will mean
the connection on an IC, but in “pin headers” the term refers to the exposed cylinder or square
section of metal that’s sticking up which you can connect female Dupont or jumpers to.</p>
<h3 id="through-hole-tht-leaded-components"><a class="header" href="#through-hole-tht-leaded-components">Through-hole, THT, Leaded components</a></h3>
<p>THT is Through-Hole Technology. Leaded components refers to components which have <em>leads</em> i.e. long
thin wire legs, for the pins. This includes both <a href="https://www.microhm.net/m/news/articles/1377.html">Axial packages for passives like
resistors</a> and <a href="https://en.wikipedia.org/wiki/Dual_in-line_package">DIP packages for
ICs</a> and <a href="https://en.wikipedia.org/wiki/TO-92">TO packages typical for
transistors</a>, among many others.</p>
<p>Through-hole components are soldered by passing each <em>lead</em> through a plated hole, and then soldering the
legs to the holes.</p>
<h3 id="smd-smt"><a class="header" href="#smd-smt">SMD, SMT</a></h3>
<p>SMD means Surface Mount Device and SMT is Surface Mount Technology. Technically SMD should be for
components and SMT for the process but in practice these are used interchangeably.</p>
<p>SMD components either have leads that are folded to sit flat on the PCB, or are “lead-less” or
“non-leaded”, which means they have a connective surface as part of the package but not “sticking
out” like a leg. Compare <a href="https://en.wikipedia.org/wiki/Small_outline_integrated_circuit">SOIC</a> and
<a href="https://en.wikipedia.org/wiki/Small-outline_transistor">SOT</a> with
<a href="https://en.wikipedia.org/wiki/Flat_no-leads_package">QFN</a>.</p>
<p>Surface mount components are soldered by positioning the entire package on its PCB footprint such
that the legs coincide with the pads, then soldering. Often this is done by adding solder paste
before positioning, as that allows for pads that are fully under devices where they wouldn’t be
accessible otherwise.</p>
<p>“Hand soldering” (using a soldering iron) of SMD components is sometimes possible but requires
forethought as the pads should be larger to allow for iron surface access.</p>
<h3 id="hybrid"><a class="header" href="#hybrid">Hybrid</a></h3>
<p>You can have components with both through-hole pins and SMD pins. Connectors are often like this:
through-hole connections provide a strong <em>mechanical</em> binding but SMD pins require less space and
only a single layer.</p>
<p>Often you’ll have just the mounting pins (non-electrical connections) as THT. Some components can
have both SMD and THT signal pins, such as <a href="https://www.mouser.com/datasheet/2/837/usb4230-3507435.pdf">this USB-C
connector</a>.</p>
<h2 id="holes-vias-mounting-holes-pth-npth"><a class="header" href="#holes-vias-mounting-holes-pth-npth">Holes, vias, mounting holes, PTH, NPTH</a></h2>
<p>A <strong>hole</strong> is an opening in a PCB. We generally distinguish between conductive holes and non-conductive
holes: non-conductive holes are used for mounting (fitting screws and posts to physically mount the
PCB to an enclosure or support, or for fixing components to the PCB) and mechanical concerns (like
stress relief for cables). Conductive holes are used for connecting layers together (vias), or for
connecting through-hole components.</p>
<p><strong>Vias</strong> are holes that are plated on the inside of the hole specifically such that an electrical
connection is made between layers that are connected to the hole. Full size vias have a large hole
and thus a large area inside the hole for the connection, micro vias have much smaller diameters,
blind and buried vias are holes that don’t go all the way through, used in 4 and higher layer PCBs
to connect two or more layers without intruding on the other layers. Blind vias go from a side but
stop before the other side, and buried vias only exist within the board, and don’t protrude on
either side. <em>JLCPCB and other low-cost fabs typically don’t support blind and buried vias.</em></p>
<p>Kicad will default micro vias to be buried; you can still use non-buried micro vias by changing the
via type to “Through” in the via properties, and optionally setting “pads only on connected layers”.</p>
<p><strong>PTH</strong> and <strong>NPTH</strong> are typically used for non-via holes to describe their footprint. PTH means
Plated Through Hole, which is when the hole will be plated on the surface, that is it will have a
ring of conductor on the outer layers. NPTH means Non-Plated Through Hole, where the plating is
absent. PTH can be used to connect mounting holes to the mounting screws thermally and electrically
as well as mechanically.</p>
<p>Make sure to consult your fab’s restrictions for hole size and clearances, and set those as defaults
in your EDA’s board settings <em>before you start layout.</em> There’s nothing more annoying than redoing
layout for a bunch of traces because your vias are too small for the fab.</p>
<h2 id="ground-floating-not-connected-not-internally-connected"><a class="header" href="#ground-floating-not-connected-not-internally-connected">Ground, floating, not connected, not internally connected</a></h2>
<p><strong>Ground</strong> is the common “zero voltage” level. There can be multiple types of ground in a board, and
occasionally you’ll have boards that have multiple isolated grounds. Sometimes you’ll also have two
types of grounds that are nonetheless connected.</p>
<p>Some different types of grounds:</p>
<ul>
<li>signal ground (typically a downward triangle)</li>
<li>chassis ground (looks like a rake), that’s when you’re connecting to a metal enclosure or chassis</li>
<li>earth ground (looks like parallel horizontal lines in the shape of a downward triangle), that’s
connected to the earth e.g. when working with mains electricity</li>
<li>digital ground vs analog ground, often when you have a power management IC the digital control
lines like SMBus or I2C will have their own ground area from the power lines’ ground area, even if
these are stiched together by vias, such that the noise from the power lines doesn’t affect the
digital lines.</li>
</ul>
<p><strong>Floating</strong> means a conductor that’s not attached to any voltage level or ground. The conductor
will basically have some random value at any given point, as it acts as the receiver for any
electromagnetic fields that are generated by the surrounding circuit or environment.</p>
<p>If you have a pin on a chip that you don’t care about, typically you still want to connect it to
something so that the value is fixed (to either ground or signal high) and it doesn’t “float”
between values at random, which could cause it to appear to be a signal to do something to the chip.</p>
<p>Generally pins that can be left floating will specifically mention that.</p>
<p><strong>NC</strong> or <strong>Not Connected</strong> pins should not be connected to any trace, but should still have a pad (the pad
should be left floating). Those pins might not be used as signal pins but they could be used
internally for thermals or mechanically.</p>
<p><strong>NiC</strong> or <strong>Not Internally Connected</strong> pins are explicitly not connected to anything inside the chip. This
means that if you want, you can use those pins as conductors for other signals, which may help for
routing.</p>
<p>Not all datasheets make the difference between NC and NiC; sometimes you can know you can treat an
NC pin as NiC from usage, but without it being mentioned in the documentation. It can be risky to do
that if the manufacturer ever decides to change the internals of the chip; an NiC mention is an
explicit guarantee, but its absence leaves the manufacturer to do whatever they want.</p>
<h1 id="soldering"><a class="header" href="#soldering">Soldering</a></h1>
<p>There’s several ways to do soldering. The three main ones are:</p>
<ul>
<li>with a soldering iron</li>
<li>with hot air, either with a hot air gun or station or with a heated chamber or oven</li>
<li>with a heated table</li>
</ul>
<p>For hobbyist use you’ll want at minimum:</p>
<ul>
<li>a <a href="#iron">soldering iron</a></li>
<li>a <a href="#heated-tables">heated table</a></li>
<li>an <a href="#iron-cleaning">iron cleaning station</a></li>
<li>a syringe of <a href="#melting-point">low-temperature solder paste</a></li>
<li>a <a href="#flux-forms">syringe of flux</a></li>
<li>a <a href="#solder">spool of lead-free solder wire</a></li>
<li><a href="#ppe">ventilation and PPE</a></li>
</ul>
<h2 id="flux"><a class="header" href="#flux">Flux</a></h2>
<p>If you’re doing soldering you need flux. If you don’t know what that is, either you’ve already been
using it and didn’t know the name, or your soldering is going to get <em>immensely easier</em> once you
read this.</p>
<p>Flux… makes soldering <em>work</em>. It’s honestly hard to explain <em>what flux does</em> without experiencing
it. Wikipedia <a href="https://en.wikipedia.org/wiki/Flux_(metallurgy)#Soldering">says</a>:</p>
<blockquote>
<p>flux serves a threefold purpose: it removes any oxidized metal from the surfaces to be soldered,
seals out air thus preventing further oxidation, and improves the wetting characteristics of the
liquid solder.</p>
</blockquote>
<p>The way I describe it is that like some materials (like butter) are
<a href="https://en.wikipedia.org/wiki/Hydrophobe">hydrophobic</a>, flux is <em>solderphobic</em>. It makes solder
want to stick to itself and to other metals more than it wants to stick to non-metals, including
flux itself.</p>
<p>So if you put flux around a metal joint, and then you add solder, the solder is going to “want” to
attach to the metal joint and to the pin or connector leg that you’re trying to solder, and <em>not</em> to
anything else. And when <em>de</em>soldering, if you can push flux “under” some solder, it’s going to make
that solder way easier to remove from the metal.</p>
<h3 id="solder-paste"><a class="header" href="#solder-paste">Solder paste</a></h3>
<p>Flux is also what makes solder paste and SMD soldering work. Solder paste is essentially flux with
small particles of solder suspended within it. Like you’re taking solder, crushing it into a powder,
and then you thoroughly mix that with flux, and that’s solder paste. When you heat solder paste, all
the little particles of solder clump together and to the nearest exposed metal, and avoid non-metal
areas. So you then have a blob of solder that’s situated on the pads you want to solder <em>and</em> coats
the entire surface of the pad without going over the boundaries of the pad (unless you have so much
solder it “overflows”).</p>
<h3 id="flux-forms"><a class="header" href="#flux-forms">Flux forms</a></h3>
<p>Flux comes in two common forms:</p>
<ul>
<li>a tin of rosin, which is pine tree sap and also used by violonists and in the medical field;</li>
<li>a syringe of liquid-at-room-temperature flux (this might be diluted rosin or some other compound).</li>
</ul>
<p>Soldering kits will typically have a tin of rosin. That has its uses, but is honestly annoying and
non-obvious; buy a syringe of flux and a <a href="#syringe-applicators">syringe applicator</a> and you’ll have
a much better time of it.</p>
<h2 id="solder"><a class="header" href="#solder">Solder</a></h2>
<p>When buying solder, you can get it in two main forms:</p>
<ul>
<li>solder paste (described above)</li>
<li>solder wire</li>
</ul>
<p>There’s also two main types of solder:</p>
<ul>
<li>leaded</li>
<li>lead-free</li>
</ul>
<p>Leaded solder is easier to work with, but contains lead, which is <a href="https://en.wikipedia.org/wiki/Lead_poisoning">bad for
you</a>. Opinions vary, but mine is that given solder is
often liquid and sometimes particles of it might spill in places and stick to your hands or
something, there’s a higher risk that you’re going to be exposed to it; and given that lead-free
solder isn’t <em>that</em> hard to work with; you should use lead-free solder.</p>
<p>There’s also additives to solder:</p>
<ul>
<li>“pure” solder (in wire, bars, or giant vats of molten metal)</li>
<li>solder paste (solder powder in flux medium)</li>
<li>solder wire with flux core (solder is wrapped around a core of solid flux)</li>
<li>antioxidants, antidross, ductability improvers, etc (not typical for hobby use)</li>
</ul>
<p>Solder wire also comes in different diameters (thickness), like 1.0 mm (typical) or 0.6mm (thin) or
1.5-2.0mm (thick).</p>
<h3 id="melting-point"><a class="header" href="#melting-point">Melting point</a></h3>
<p>Solder is an alloy, and the formulation of the alloy affects its characteristics. One of those is
the melting point. This directly affects how hot you’ll do your soldering at. One thing to remember
with this value is that it’s really the “solidifying point”: if you have 180°C solder, you’ll want
to work with it at around 220-250°C, because at 180°C it will be <em>just barely</em> liquid, and not
workable at all. You want it more liquid so you can push it around and so it can flow into joints.</p>
<p>If you’re having a hard time imagining this, think of chocolate. When water is freezing/melting, it
goes either hard solid (ice) or free-flowing liquid, there’s no middle. But when you heat chocolate,
there’s a good range where it’s no longer solid but still one block that is kinda soft, and then it
gradually becomes a viscous paste, and when hot it’s much more liquid like a thick hot chocolate.</p>
<p>There’s a wide range of melting points that various alloys have achieved, from about 90°C all the
way up to 450°C. Most solder melts at around 180°C. You can get “low temperature” solder that
instead melts at 138°C (or around there), and therefore you can work at a lower temperature of
170-180°C.</p>
<p>Low temperature solder generally trades that off by being less flexible when solid, that is, more
brittle. So if you use a low temperature solder for a device that is subjected to vibrations or
shocks, you might find that solder joins break or fracture, where a higher temperature solder won’t
have that problem.</p>
<p>Most of the time I use 138°C solder paste and “regular” 1mm 180°C solder wire. I also have various
other solder wires and pastes.</p>
<h3 id="temperature-on-components"><a class="header" href="#temperature-on-components">Temperature on components</a></h3>
<p>Most components have an upper bound as the temperature you can store or solder them at. Generally
that’s on the order of 300°C, for a short period of time like a minute. At lower temperatures, you
can more or less safely have components at that temperature for much longer periods of time.</p>
<p>Consult the datasheet for your components. For example, look at this
<a href="https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bme280-ds002.pdf">BME280</a>
pressure sensor. Near the end you’ll find “Soldering Guidelines”, which includes a table and a chart:</p>
<p><img src="bme280-soldering-guide.png" alt="soldering temperature guidelines for the BME280" /></p>
<p>This indicates that they recommend soldering at 260°C peak temperature, with a preheat between 150
and 200°C for 60 to 150 seconds. Now, these are <em>factory-grade</em> soldering instructions. For my
hobbyist use, what I take from this is:</p>
<ul>
<li>I can’t exceed 260°C ever</li>
<li>I shouldn’t spend a lot of time above 200°C if I can avoid it</li>
</ul>
<p>Given I typically solder at 180°C, that’s generally fine, but because this is a miniature sensor,
I’ll try to limit even that, e.g. by leaving it for last.</p>
<h2 id="heated-tables"><a class="header" href="#heated-tables">Heated tables</a></h2>
<p>When doing SMD soldering, you basically have two options: hot air or heated table. I don’t have a
lot of experience with hot air, but heated table is very easy and is my preferred soldering method.</p>
<blockquote>
<p>Aside: “hotbed” or “heated bed” is typically a 3D printing term, even though it’s conceptually the
same thing.</p>
</blockquote>
<p>The main decision with heated tables is the size of the table. I work with pretty small circuit
boards so I have a NZ$15 55x55mm USB-powered table which fits snuggly under my microscope. For
boards the size of a Raspberry Pi or mini-computer you’ll probably want 80x80mm or 150x150mm.</p>
<p>All tables will have:</p>
<ul>
<li>temperature control to 10°C</li>
<li>an ON/OFF heat control</li>
<li>uniform heating of the table</li>
</ul>
<p>More dollars can get you:</p>
<ul>
<li>bigger size</li>
<li>larger temperature range</li>
<li>more precise temperature control</li>
<li>temperature presets</li>
<li>timed heating and cooldown curves</li>
<li>arms on the table to hold your board in place</li>
<li>digital control (e.g. connects to a computer)</li>
</ul>
<p>Even with a board that’s larger than your table, you can use clamps or standoffs to hold the parts
of the board that go beyond the edges, and only heat the part you’re working on. The disadvantage of
this is that your table is going to need to dump a lot more heat to maintain temperature as you’re
massively increasing the cooling surface, and you might get temperature gradients across the board
which can be iffy for mechanical reasons.</p>
<p>You’re not heating anything to red-hot or white-hot temperatures, which is great for safety, but
also means that you’ll have zero indication that something is hot. Heated tables typically have a
temperature display when the heat is off, and may even have it in a “sleep mode.” However, if you
disconnect power, that will go away. So always keep your table plugged in until it’s reached lower
temperatures (40°C or less). Similarly, keep a hot PCB <em>on</em> the table while it’s cooling: you don’t
want to take it off the table and then grab it with your bare fingers when it’s still 150°C!</p>
<p>If you absolutely have to grab a warm (&lt;100°C) PCB, hold it by the sides (unless you have plated
sides). This will limit your contact area and you’ll only be grabbing the laminate insulating
material, not the thermally conductive copper.</p>
<h2 id="iron"><a class="header" href="#iron">Iron</a></h2>
<p>Even if you use a heated table for 90% of your soldering like I do, you’ll still want a soldering
iron. There’s… many soldering irons out there. The one I use is a
<a href="https://pine64.com/product/pinecil-smart-mini-portable-soldering-iron/">Pinecil</a> which is a US$26
USB-powered iron with swappable TS-factor tips.</p>
<p>Generally, you want:</p>
<ul>
<li>temperature control to 10°C increments or better</li>
<li>swappable tips (so you can use different sizes / shapes)</li>
<li>idle sleep (so it cuts off the heat when idle for a few minutes, which preserves the tip)</li>
</ul>
<p>If you use a USB-powered iron like the Pinecil, get a silicon cable instead of rubber/plastic so
you don’t accidentally melt it when soldering. In fact, get a few cables so you have spares and can
use them for other USB things while soldering (like a <a href="#heated-table">heated table</a> or
<a href="#microscope">microscope</a>).</p>
<p>You’ll also need a good power supply, like the
<a href="https://pine64.com/product-category/pinepower/">PinePower</a> or a GaN USB-PD charger or a USB-PD
power bank. Some power supplies don’t work with some USB-PD devices, likely because of voltages or
how seamlessly they handle voltage transitions. For example one of my GaN chargers can be used with
the Pinecil, but not with my heated table. Anecdotally, I use <a href="https://www.baseus.com/products/adaman-power-bank-65w-20000mah">this Baseus 65W
battery</a> with both my Pinecil and my
heated table.</p>
<h3 id="tips"><a class="header" href="#tips">Tips</a></h3>
<p>Soldering tips come in form factors (<code>TS</code> (long) or <code>ST</code> (short), suitable for the TS100, Pinecil,
etc soldering irons) and tip types. The tip type is the size and shape it is.</p>
<p>I prefer short length tips as that feels more like a pencil (remember you can’t hold the metal bit
of the soldering iron, as that’s the hot part!).</p>
<p>Most of the time I use a ST-I tip, which is a short barrel and a conical tip shape at about a 15°
angle. For through-hole soldering work I’ll swap in a ST-K or ST-C4, which are thicker rectangular
sections with a 45° angle at the tip, so you can apply a large surface at the working interface.
Both of these are available in <a href="https://pine64.com/product/pinecil-soldering-short-tip-set-gross/">this pinecil tip
set</a>.</p>
<p><img src="./pinecil-tip-short-gross.jpg" alt="box of four tip with diagram descriptions of their shapes and size" /></p>
<p>A finer tip gives you more control and the ability to target much smaller areas, but the larger area
you can touch with your iron, the more heat you can dump into the touching metal, and so the faster
you can work.</p>
<p>I’ve bought both gross (large) and fine (small) sets of tips for the Pinecil and I very rarely if
ever use the fine set, even working with SMD components that are &lt;2mm.</p>
<h3 id="iron-cleaning"><a class="header" href="#iron-cleaning">Iron cleaning</a></h3>
<p>Keeping the tip of your iron clean is very important, as a dirty iron tip will not conduct heat as
well (and may even gunk your project). At minimum you want to do a quick clean whenever you start
and stop work, and a deeper clean once in a while. At best you’ll want to clean <em>during</em> work too.</p>
<p>A quick clean takes a few seconds:</p>
<ul>
<li>rub and push the tip in a brass wool wire ball</li>
<li>tin the tip (apply a bit of solder to coat the tip)</li>
</ul>
<p>A more thorough clean is:</p>
<ul>
<li>use the brass wool wire for longer</li>
<li>using a tip cleaner powder/paste (also called a “tip tinner” or “<a href="https://www.amazon.com.au/dp/B002V7QDZQ">tip
activator</a>”) before tinning</li>
<li>using a <a href="https://www.digikey.com/en/products/detail/apex-tool-group/WPB1/1801475">polishing bar</a></li>
<li>tin the tip</li>
<li>repeat the process another time</li>
</ul>
<p>If you’re ever at the point that you feel like using sandpaper, the tip is probably unsalvageable.
Being aggressive with sandpaper runs the risk of removing the iron plating and exposing the copper
core. Copper dissolves into solder, so your tip will quickly die soon after. Additionally sandpaper
grit (the bits of glass/sand that make up the abrasive surface) will contaminate your iron.</p>
<p>Despite what many tutorials say, you shouldn’t use a sponge to clean your iron (<a href="https://forum.digikey.com/t/how-to-clean-tin-and-maintain-soldering-iron-tip/2006/2">Daveca
(2018)</a>), as
bits of sponge will come off and contaminate your iron, and later your solder joins.</p>
<h2 id="delivery"><a class="header" href="#delivery">Delivery</a></h2>
<h3 id="syringe-tips"><a class="header" href="#syringe-tips">Syringe tips</a></h3>
<p>Syringes for flux and solder paste have a removable <em>tip</em> that gets screwed on. Tips can be entirely
made of plastic, typically in a cone that you cut to obtain the hole you want, or they can have a
long metal tube that has a specific diameter.</p>
<p>The metal ones are usually better because you always know you’re getting a set size and because the
tube is long and constant-width you can “see around” it a lot easier than you can with a cone. On
the other hand, if you allow the tip’s metal tube to heat, you can have problems where solder will
liquefy inside the tip, gunking it up.</p>
<p>Syringes will usually come with tips but buying a pack of spares in the diameter you prefer will not
cost a lot and will ensure you’re not at the mercy of whatever tip size the manufacturer included.</p>
<p>It’s really easy to push more stuff out the syringe than you need, so always keep something to wipe
the nozzle with. If you have a soldering iron sponge, use it for this <a href="#iron-cleaning">instead of
cleaning</a>!</p>
<h3 id="syringe-applicators"><a class="header" href="#syringe-applicators">Syringe applicators</a></h3>
<p>The “push” side of the syringe can be pushed “by hand” with a direct piston, but that’s usually very
imprecise and awkward to hold in a soldering context. When I’m pushing solder out of a syringe, I’m
often trying to dispense a millimetre or less out of the solder tip, and the syringe is 15mm wide,
so that’s a <em>tiny</em> amount of pressure I need to apply. Instead, buy or make an applicator.</p>
<p>There’s two main kinds, squeeze types and screw types.</p>
<p>Squeeze syringe tools fit around the syringe and let you use a finger to squeeze an arm that’s
parallel or at a small angle to the syringe’s body to dispense some paste.</p>
<p><img src="./syringe-tool-squeeze.png" alt="squeeze type applicator" /></p>
<p>Screw type syringe tools fit the rear of the syringe and offer a “scroll wheel” which controls a
threaded rod.</p>
<p><img src="./syringe-tool-screw.png" alt="screw type applicator" /></p>
<p>I prefer screw type applicators, as they allow much finer control (I often “push” the wheel by a
millimetre or less, which results in about 10 <em>micro</em>meters of displacement for the piston) and
removing pressure is obvious and instant. Additionally, I find that I can immediately gauge how much
pressure is applied by the resistance of the wheel.</p>
<p>The screw applicator I use is 3D-printed from <a href="https://makerworld.com/en/models/474550">this model by
Dimmu_Ogir</a>, though I had to resize the piston end to fit
my syringes.</p>
<h2 id="microscope"><a class="header" href="#microscope">Microscope</a></h2>
<p>This <a href="https://www.amazon.com.au/4-3-Coin-Microscope-Adjustable-Compatible/dp/B0CB5GHG3L">4.3“ digital microscope with PC
connection</a>, which
is NZ$80 on Amazon, but you can find the exact same for NZ$50 on AliExpress.</p>
<p>You can find more expensive ones with better features but this one is Fine™. It’s battery-powered
(less wires in your way) with about 6 hours of work time from full, it’s quite intuitive to use, and
you can hook it up to a computer where it will present as a webcam, so you can have a much bigger
screen for it and record/take pictures without fiddling with the micro SD card… or even use it for
streaming if that’s your thing.</p>
<p>There’s two small caveats with it:</p>
<ul>
<li>
<p>the built-in screen has a small but noticeable delay (about 100ms). This is less noticeable
connected to a PC, though still present, probably inherent due to the technology. Most of the time
it’s not an issue, but 100ms is right on the edge of an annoying lag when e.g. typing, so at times
it can be a minor issue.</p>
</li>
<li>
<p>the camera picks up more infrared than human eyes can. You can actually see that a little in the
screen, with faint red showing up in places that aren’t at all red to my eyes. It doesn’t pick up
enough that it would be useful for temperature measurement like an infrared camera, but it <em>is</em>
taken into account by the auto-contrast mechanism. For this reason, when the board is heated up,
you generally want to turn the built-in light <em>down</em> to get better contrast.</p>
</li>
</ul>
<h2 id="ppe"><a class="header" href="#ppe">PPE</a></h2>
<p>You’re working with high temperatures (&gt;150°C) and corrosive materials (flux). You should use:</p>
<ul>
<li>safety glasses (buy more than one pair)</li>
<li>non-flammable clothes (no plastic/synthetics)</li>
<li>ventilation</li>
</ul>
<p>You may also want:</p>
<ul>
<li>some kind of mask</li>
<li>extraction vents</li>
<li>filtered fans</li>
<li>heat-resistant gloves</li>
</ul>
<p>Ventilation is critical.</p>
<p>Some guides say to work with your head to the side of the work area, not directly above. I… find
this impractical in general, and ineffective anyway. Instead, arrange for air movement to draw fumes
away. You don’t need to keep a window open, instead run a cheap $5 USB fan from the side of your
work area pointing slightly or fully away from you, but still blowing gently across your work. That
will disperse any fumes away from your face.</p>
<p>A better solution if you can is an extractor fan: instead of dispersing fumes, pull them into the
fan, and either throw them outside with a duct, or pass them through a HEPA filter, or both.</p>
<p>As a clarification point, what you’re trying to avoid is <em>flux</em> fumes and perhaps solder suspension.
Solder itself boils at 1700°C. Just like water, small amounts will evaporate off the surface of
liquid solder, but you’ll never get massive amounts of solder vapour like you will for flux and any
impurities in the solder mixes.</p>
<h1 id="design"><a class="header" href="#design">Design</a></h1>
<h2 id="mounting-holes-heatsink-holes-stress-relief"><a class="header" href="#mounting-holes-heatsink-holes-stress-relief">Mounting holes, heatsink holes, stress relief</a></h2>
<p>Always start by adding your desired board size and shape as the outline, and then immediately add
mounting holes to the schematic, and then to the PCB. If you forget it will be very hard to add
them later, and they’ll end up in weird places. For rectangular boards, one mounting hole per
corner is a very good start. For larger boards, consider adding a mounting hole in the center, to
reduce vibrations or the potential for breakage or distension if there’s pressure on the board.</p>
<p>As you add the main components, like MCUs, power converters, and other ICs, consider whether you
will need heatsinks for those. If you do, you may want to add mounting holes for those as well.
If you have a wire plugging into a board and going outside of the case, or to a movable part, or
set in such a way that pulling in the wrong direction could cause damage, consider adding stress
relief holes. (<a href="https://www.youtube.com/watch?v=409u7RaraEc">Feranec, 2017</a>)</p>
<p>M3 is a decent size. Holes will have a large clearance around them: this is for the screw head or
fixing post base or nut on a bolt or standoffs; you therefore don’t want to violate this clearance
and have any components in there. You also should refrain from routing traces within that area on
the top and bottom layers, as an overtight screw could strip those right out.</p>
<h2 id="high-speed-low-speed-high-frequency-signals"><a class="header" href="#high-speed-low-speed-high-frequency-signals">High speed, low speed, high frequency signals</a></h2>
<p>There’s plenty of advice and rules that only apply to either high or low speed/frequency signals.
The goal with most of this advice is to maximise signal <em>integrity</em> or <em>quality</em>.</p>
<p>High speed is often expressed in frequency, but the true determinant is rise time
(<a href="https://resources.altium.com/p/what-high-speed-design">Peterson, 2021</a>). That is, even if you
don’t have a high speed clock signal, you might have high speed electromagnetic waves if you have
short rise times. A 500ps rise time is equivalent to a 2 gigahertz signal.</p>
<p>Something that switches less frequently than once a second (e.g. a power enable line for a voltage
regulator) is never a worry for signal considerations. A line is considered a “signal” from about
1kHz (<a href="https://www.youtube.com/watch?v=icRzEZF3eZo">Bogatin, 2020</a>).</p>
<p>As a summary:</p>
<ul>
<li>below 1kHz: not considered a signal for integrity purposes</li>
<li>100kHz: “fast”</li>
<li>10MHz: low speed</li>
<li>100MHz: high speed signals</li>
</ul>
<p>For example, PCIE, HDMI, USB 2.0 and higher, Ethernet at 100Mbps or higher… are all “high speed”.
However, you can get away with breaking more rules if you’re dealing with “low speed” signals like
USB 1.1, 10Mbps Ethernet, or “fast” signals like I2C, 1-Wire, etc. Note that SPI can driven at
various speeds, ranging from “fast” (kHz) to “low speed” (tens of MHz), but is never considered
“high speed”.</p>
<p>Also note that Ethernet in particular is highly resistant to rule-breaking. Signal integrity losses
will result in lower effective speeds but generally not errors on the wire.</p>
<p>A great “quick reference” style guide for high speed routing is <a href="https://www.ti.com/lit/an/spraar7j/spraar7j.pdf">TI’s SPRAAR7J</a>.</p>
<h2 id="routing-differential-pairs"><a class="header" href="#routing-differential-pairs">Routing differential pairs</a></h2>
<p>The main activity when dealing with high speed differential signals is routing pairs. Before that,
you need to configure the size and spacing of the conductors in the pair. Before <em>that</em>, you need
to figure out and configure the stackup for the board.</p>
<p>To calculate and configure the pairs, see <a href="https://www.digikey.com/en/maker/projects/how-to-route-differential-pairs-in-kicad-for-usb/45b99011f5d34879ae1831dce1f13e93">this Digikey guide from Shawn Hymel (2020)</a>,
which walks through the process using KiCad, for USB data lines.</p>
<p>When routing, you want to:</p>
<ul>
<li>keep the lines over an unbroken ground plane</li>
<li>avoid branches</li>
<li>avoid ≥90° turns (KiCad will prevent this anyway)</li>
<li>avoid crossing other high speed lines</li>
<li>if you can’t avoid a crossing, keep the intersection as short as possible; never have two high
speed lines overlap vertically over a length</li>
<li>if you can, keep different pairs separated by three times the conductor-plane gap or more</li>
<li>if you have to cross the planes:
<ul>
<li>cross to other signal planes, don’t route on ground planes</li>
<li>put the vias for each conductor in the pair together as possible</li>
<li>add ground vias close to the signal vias to allow the return current to cross ground planes
(<a href="https://www.youtube.com/watch?v=52fxuRGifLU">Feranec et al, 2021</a>).</li>
</ul>
</li>
</ul>
<p>Once you’ve got the routing done, use the skew tool to match the length of conductors within a
pair. For very long traces, you may also need to match the length of pairs to other pairs in the
connection; refer to the device manual as it may have information on these. For example, in the
<a href="https://datasheets.raspberrypi.com/cm5/cm5-datasheet.pdf">Raspberry Pi CM5 manual</a>:</p>
<blockquote>
<p><strong>2.4. USB 3.0 (Super speed)</strong></p>
<p>Each USB 3.0 interface supports up to 5Gb/s signalling simultaneously. The differential pair
should be routed as a 90Ω differential pair. There is no need to match the lengths between pairs,
only the signals within a pair need to be length matched, ideally to less than 0.1mm. The P/N
signals of the USB 3 signals may be P and N swapped. The USB 2 pairs can’t be P/N swapped.</p>
</blockquote>
<h2 id="stackup"><a class="header" href="#stackup">Stackup</a></h2>
<p><img src="./kicad-stackup.png" alt="screenshot of a configured 4-layer board stackup in KiCad" /></p>
<p>Start by selecting the layer count, then go to your fab and look for their stackup. For JLCPCB,
this is found on the <a href="https://jlcpcb.com/impedance">impedance control page</a>. This page has many
different stackups; use the “no requirements” stackup unless you know what you want.</p>
<p>You also need to choose which layers will be signal layers (where routing happens), and which will
be ground planes. For most purposes I use:</p>
<ul>
<li>for 2 layers: top signal, bottom ground</li>
<li>for 4 layers: top and bottom signal, middle two layers ground</li>
</ul>
<p>Generally you want to have a ground plane layer associated with each signal layer, and you don’t
want to have a signal layer have to “go through” <em>another</em> signal layer to reach its ground plane.</p>
<h2 id="stitching-vias"><a class="header" href="#stitching-vias">Stitching vias</a></h2>
<p>When you have multiple ground planes (and/or multiple power planes), you want to stitch the planes
together. This means to add a lot of vias to the board, which all connect to the ground layers.
In KiCad, you can use the <a href="https://github.com/weirdgyn/viastitching">viastitching plugin</a>.</p>
<p>To select the spacing of the via grid, take the highest frequency (clock or rise time) that the
board will carry, find the <a href="https://en.wikipedia.org/wiki/Velocity_factor">wave velocity</a> \(v\) in the conductor:</p>
<p>$$ v = \frac{c}{\sqrt{\kappa}} $$</p>
<p>And then the wavelength \(\lambda\):</p>
<p>$$ \lambda = \frac{v}{f} $$</p>
<p>where \(\kappa\) is the “epsilon R” value for the dielectric of your stackup (typically \(4.5\)
for FR4), \(c\) is the speed of light, and \(f\) is the frequency in Hz.</p>
<p>Place vias at spacings of one tenth the wavelength. You can vary this ratio to 1/8th or 1/20th etc
if that creates spacings that are too large compared to the board or too small for clearance.</p>
<p>For example, at 2 GHz, the via stitching at 1/10th would be at intervals of 7.1mm.</p>
<h2 id="logos"><a class="header" href="#logos">Logos</a></h2>
<p>There’s “designed with KiCad”, “Open Hardware”, and other logos in the standard footprint library.
They all come in copper and silkscreen variants. However, when updating the PCB from the schematic,
they’ll disappear! …unless you enable the “Not in schematic” attribute in their properties.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../technical/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../technical/g7-7700-nouveau.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../technical/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../technical/g7-7700-nouveau.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
